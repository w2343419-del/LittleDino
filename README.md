# Little Dino - 游戏设计与开发文档

版本: 1.0.0  
开发语言: C++ (C++17 标准)  
图形库: SFML (Simple and Fast Multimedia Library) 2.5+  
开发者: Yao Wang

---
## 1. 项目简介
Little Dino 是一款基于 C++ 和 SFML 开发的 2D 无尽跑酷游戏（Infinite Runner）。灵感来源于经典的 Chrome 恐龙游戏，但在其基础上增加了更丰富的视觉效果、金币收集系统、背景音乐、完善的存档机制以及友好的交互 UI。玩家需要控制一只小恐龙在沙漠中奔跑，躲避仙人掌和飞鸟，同时尽可能多地收集金币以获取高分。

---
## 2. 游戏玩法与操作指南
### 2.1 游戏目标
- 生存：躲避障碍物（仙人掌、鸟）以跑得更远。
- 得分：移动距离越远分数越高。
- 收集：收集金币增加“金币记录”，金币也会计入存档。

### 2.2 控制方式（键鼠）
动作 | 按键 | 说明
--- | --- | ---
跳跃 | 空格 / ↑ / W | 控制恐龙跳跃躲避地面障碍。
快速下落 | ↓ (下箭头) | 在空中时按下，恐龙会加速坠落。
暂停游戏 | P | 暂停当前游戏，唤出暂停菜单。
保存游戏 | K（暂停时） | 在暂停状态下快速存档（也可点击按钮）。
返回菜单 | ESC | 在游戏中直接返回主菜单。
重玩 | R | 游戏结束时快速重新开始。
UI 交互 | 鼠标左键 | 点击主菜单或暂停菜单中的按钮。

---
## 3. 核心功能系统
### 3.1 障碍物生成系统
- 随机化生成：
  - 仙人掌：分为大、小两种类型，生成间隔随机。
  - 飞鸟：当玩家奔跑距离超过一定阈值（300）后开始生成，带翅膀扇动动画。
- 智能防重叠：检测算法确保金币不会与障碍物重叠，飞鸟不会生成在已存在障碍物的位置，保证可玩性。

### 3.2 存档与读档系统
- 文件存储：使用 `savegame.txt` 存储当前游戏状态（距离、金币数、恐龙位置、障碍物列表）。
- 可视化操作：
  - 主菜单：点击 “Load Save” 读取进度。
  - 暂停菜单：点击 “Save Game” 保存当前进度，成功后有绿色提示。
- 倒计时缓冲：读取存档或从暂停恢复时显示 “3-2-1” 倒计时，给予玩家反应时间。

### 3.3 分数系统
- 最高记录：`highscore.dat` 持久化记录历史最高分（Best Score）和最多金币数（Best Coins）。
- 动态难度：随着距离增加，速度会逐渐加快，直到达到最大速度。

### 3.4 视觉与音效
- 视差滚动：双层地面背景滚动，模拟移动效果。
- UI 设计：扁平化 UI，卡片阴影、按钮悬停变色、半透明遮罩。
- 音效：内置程序生成的 `shutdown.wav`（碰撞音效）和外部加载的 BGM。

---
## 4. 代码架构与类设计
### 4.1 实体类 (Entities)
- `Dino`（玩家）：处理重力/跳跃/速度，管理跑步帧切换与跳跃纹理。
- `Cactus`（障碍物）：大/小类型与碰撞箱，随速度左移。
- `Bird`（飞行障碍物）：翅膀扇动动画计时，空中碰撞检测。
- `Coin`（收集物）：`collected` 标记，收集后不再绘制。

### 4.2 游戏状态机 (State Machine)
```cpp
enum GameState { 
    MENU,       // 主菜单
    PLAYING,    // 游戏运行中
    INTRO,      // 玩法说明
    ABOUT,      // 制作人员
    GAME_OVER,  // 结算界面
    COUNTDOWN   // 倒计时缓冲
};
```

### 4.3 资源管理
- 纹理：全局加载 PNG（恐龙、仙人掌、金币等）。
- 字体：加载 TTF 用于 UI 显示。
- 音频：`sf::Music` 播放 BGM，`sf::Sound` 播放音效。

---
## 5. 编译与运行说明
### 5.1 环境需求
1. C++ 编译器：支持 C++11 或更高版本（如 MinGW g++, MSVC）。
2. SFML 库：需安装 SFML SDK（2.5.1 或 2.6.x）。

### 5.2 资源文件清单（需与可执行文件同目录）
文件名 | 类型 | 描述
--- | --- | ---
DinoRun1.png | 图片 | 恐龙跑步帧 1
DinoRun2.png | 图片 | 恐龙跑步帧 2
DinoJump.png | 图片 | 恐龙跳跃帧
LargeCactus1.png | 图片 | 大仙人掌
SmallCactus1.png | 图片 | 小仙人掌 1
SmallCactus2.png | 图片 | 小仙人掌 2
Coin.png | 图片 | 金币
Track.png | 图片 | 地面轨道
BirdWingUp.png | 图片 | 飞鸟翅膀上扬
BirdWingDown.png | 图片 | 飞鸟翅膀下压
bgm.ogg | 音频 | 背景音乐
Roboto-Regular.ttf | 字体 | 游戏通用字体

> 注：`shutdown.wav`、`highscore.dat` 和 `savegame.txt` 会由程序自动生成，无需预置。

### 5.3 编译命令示例 (MinGW/G++)
假设 SFML 安装在 `C:\SFML`：

```bash
g++ main.cpp -o LittleDino.exe -I C:\SFML\include -L C:\SFML\lib -lsfml-graphics -lsfml-window -lsfml-system -lsfml-audio
```

Little Dino 祝您游戏愉快！
